
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A tool to perform a bank erosion analysis based on a number of D-Flow FM simulations.">
      
      
      
        <link rel="canonical" href="https://deltares.github.io/D-FAST_Bank_Erosion/develop/api/bank_erosion/erosion_calculation.html">
      
      
        <link rel="prev" href="bank_erosion.html">
      
      
        <link rel="next" href="erosion_calculator.html">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Erosion Calculation Process - D-FAST Bank Erosion</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#erosion-calculation-process" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="D-FAST Bank Erosion" class="md-header__button md-logo" aria-label="D-FAST Bank Erosion" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            D-FAST Bank Erosion
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Erosion Calculation Process
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="lime"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Deltares/D-FAST_Bank_Erosion" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Deltares/D-FAST_Bank_Erosion
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guides/poetry.html" class="md-tabs__link">
          
  
  
    
  
  How-to

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../architecture-design/main-components.html" class="md-tabs__link">
          
  
  
    
  
  Architecture Design

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../bank_lines/bank_lines.html" class="md-tabs__link">
          
  
  
    
  
  API Reference

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../gui/gui.html" class="md-tabs__link">
          
  
  
    
  
  User Interface

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../change-log.html" class="md-tabs__link">
        
  
  
    
  
  Release Notes

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../license.html" class="md-tabs__link">
        
  
  
    
  
  License

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="D-FAST Bank Erosion" class="md-nav__button md-logo" aria-label="D-FAST Bank Erosion" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    D-FAST Bank Erosion
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Deltares/D-FAST_Bank_Erosion" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Deltares/D-FAST_Bank_Erosion
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How-to
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            How-to
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/poetry.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Local clone + Poetry
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/contributing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/documentation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/developer-instructions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer Instructions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/pre-commit-hooks.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pre-Commit Hooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/doctest.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docstrings and Doctest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/testing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Naming conventions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/teamcity-ci.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teamcity ci
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Architecture Design
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Architecture Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture-design/main-components.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    D-FAST Bank Erosion Architecture and Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture-design/class-diagram.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Class Diagram for Existing D-FAST Bank Erosion Code
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Bank Line Module
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Bank Line Module
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bank_lines/bank_lines.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bank Lines Module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bank_lines/data_models.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bank Lines Data Models
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" checked>
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Bank Erosion Module
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Bank Erosion Module
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="bank_erosion.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bank Erosion Module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Erosion Calculation Process
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="erosion_calculation.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Erosion Calculation Process
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-model" class="md-nav__link">
    <span class="md-ellipsis">
      Data Model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calculation-process" class="md-nav__link">
    <span class="md-ellipsis">
      Calculation Process
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Calculation Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#detailed-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed Steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sequence-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Sequence Diagram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-calculations" class="md-nav__link">
    <span class="md-ellipsis">
      Key Calculations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#physical-processes-and-mathematical-models" class="md-nav__link">
    <span class="md-ellipsis">
      Physical Processes and Mathematical Models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Physical Processes and Mathematical Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ship-induced-wave-height-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Ship-Induced Wave Height Calculation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#equilibrium-erosion-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Equilibrium Erosion Calculation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bank-erosion-dynamics-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Bank Erosion Dynamics Calculation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bank Erosion Dynamics Calculation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flow-induced-erosion" class="md-nav__link">
    <span class="md-ellipsis">
      Flow-Induced Erosion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ship-induced-erosion" class="md-nav__link">
    <span class="md-ellipsis">
      Ship-Induced Erosion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#total-erosion" class="md-nav__link">
    <span class="md-ellipsis">
      Total Erosion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-example" class="md-nav__link">
    <span class="md-ellipsis">
      Usage Example
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="erosion_calculator.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bank Erosion Calculator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mesh_processor.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bank Erosion Mesh Processor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="debugger.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bank Erosion Debugger
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_6" >
        
          
          <label class="md-nav__link" for="__nav_4_2_6" id="__nav_4_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data Models
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_6">
            <span class="md-nav__icon md-icon"></span>
            Data Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="data_models/calculation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bank Erosion Calculation Data Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="data_models/inputs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bank Erosion Input Data Models
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../io.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    I/O Module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmd.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command Module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utilities Module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plotting.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plotting Module
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Interface
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            User Interface
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/gui.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gui
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../change-log.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-model" class="md-nav__link">
    <span class="md-ellipsis">
      Data Model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calculation-process" class="md-nav__link">
    <span class="md-ellipsis">
      Calculation Process
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Calculation Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#detailed-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed Steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sequence-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Sequence Diagram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-calculations" class="md-nav__link">
    <span class="md-ellipsis">
      Key Calculations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#physical-processes-and-mathematical-models" class="md-nav__link">
    <span class="md-ellipsis">
      Physical Processes and Mathematical Models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Physical Processes and Mathematical Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ship-induced-wave-height-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Ship-Induced Wave Height Calculation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#equilibrium-erosion-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Equilibrium Erosion Calculation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bank-erosion-dynamics-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Bank Erosion Dynamics Calculation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bank Erosion Dynamics Calculation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flow-induced-erosion" class="md-nav__link">
    <span class="md-ellipsis">
      Flow-Induced Erosion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ship-induced-erosion" class="md-nav__link">
    <span class="md-ellipsis">
      Ship-Induced Erosion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#total-erosion" class="md-nav__link">
    <span class="md-ellipsis">
      Total Erosion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-example" class="md-nav__link">
    <span class="md-ellipsis">
      Usage Example
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/Deltares/D-FAST_Bank_Erosion/edit/master/docs/api/bank_erosion/erosion_calculation.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/Deltares/D-FAST_Bank_Erosion/raw/master/docs/api/bank_erosion/erosion_calculation.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="erosion-calculation-process"><a class="toclink" href="#erosion-calculation-process">Erosion Calculation Process</a><a class="headerlink" href="#erosion-calculation-process" title="Permanent link">#</a></h1>
<p>This document explains the bank erosion calculation process in the D-FAST Bank Erosion software, focusing on the <code>compute_erosion_per_level</code> method in the <code>Erosion</code> class.</p>
<h2 id="overview"><a class="toclink" href="#overview">Overview</a><a class="headerlink" href="#overview" title="Permanent link">#</a></h2>
<p>The <code>compute_erosion_per_level</code> method is a core component of the bank erosion calculation process. It calculates the bank erosion for a specific discharge level, processing both the left and right banks of the river. The method computes various parameters such as bank velocity, water depth, and erosion distances, and returns a <code>SingleDischargeLevel</code> object containing the results for both banks.</p>
<h2 id="data-model"><a class="toclink" href="#data-model">Data Model</a><a class="headerlink" href="#data-model" title="Permanent link">#</a></h2>
<p>Before diving into the calculation process, it's important to understand the data model used in the bank erosion calculations:</p>
<pre class="mermaid"><code>classDiagram
    class DischargeLevels {
        +List~SingleDischargeLevel~ levels
        +__getitem__(int)
        +__iter__()
        +append(SingleDischargeLevel)
        +get_max_hfw_level()
        +total_erosion_volume()
    }

    class SingleDischargeLevel {
        +SingleCalculation left
        +SingleCalculation right
        +float hfw_max
    }

    class SingleCalculation {
        +array bank_velocity
        +array water_level
        +array chezy
        +array erosion_distance_tot
        +array erosion_volume_tot
        +array erosion_distance_shipping
        +array erosion_distance_flow
        +array erosion_distance_eq
        +array erosion_volume_eq
        +array volume_per_discharge
    }

    class SingleLevelParameters {
        +SingleParameters left
        +SingleParameters right
    }

    class SingleParameters {
        +float discharge
        +float probability
        +dict ship_parameters
    }

    DischargeLevels o-- SingleDischargeLevel : contains
    SingleDischargeLevel *-- SingleCalculation : has left/right
    SingleLevelParameters *-- SingleParameters : has left/right</code></pre>
<p>The <code>DischargeLevels</code> class contains a list of <code>SingleDischargeLevel</code> objects, each representing the erosion calculation results for a specific discharge level. Each <code>SingleDischargeLevel</code> has left and right attributes of type <code>SingleCalculation</code>, which store the calculation results for the left and right banks, respectively.</p>
<h2 id="calculation-process"><a class="toclink" href="#calculation-process">Calculation Process</a><a class="headerlink" href="#calculation-process" title="Permanent link">#</a></h2>
<p>The <code>compute_erosion_per_level</code> method follows these steps:</p>
<pre class="mermaid"><code>flowchart TD
    A[Initialize variables] --&gt; B[Loop through each bank]
    B --&gt; C[Calculate bank velocity]
    C --&gt; D{Is first level?}
    D -- Yes --&gt; E[Calculate bank height]
    D -- No --&gt; F[Get fairway data]
    E --&gt; F
    F --&gt; F1[Extract water level, chezy, and water depth]
    F1 --&gt; G{Is last level?}
    G -- Yes --&gt; H[Calculate equilibrium erosion]
    G -- No --&gt; I[Calculate bank erosion dynamics]
    H --&gt; I
    I --&gt; J[Accumulate eroded volumes per km]
    J --&gt; K[Add calculation to results]
    K --&gt; L{More banks?}
    L -- Yes --&gt; B
    L -- No --&gt; M[Create SingleDischargeLevel object]
    M --&gt; N[Return results]</code></pre>
<h3 id="detailed-steps"><a class="toclink" href="#detailed-steps">Detailed Steps</a><a class="headerlink" href="#detailed-steps" title="Permanent link">#</a></h3>
<ol>
<li><strong>Initialize variables</strong>:</li>
<li>Create an array to store eroded volumes per kilometer</li>
<li>Initialize the maximum water depth to 0</li>
<li>
<p>Create an empty list to store calculation results for each bank</p>
</li>
<li>
<p><strong>Loop through each bank</strong> (left and right):</p>
</li>
<li>
<p>Create a new <code>SingleCalculation</code> object to store results</p>
</li>
<li>
<p><strong>Calculate bank velocity</strong>:</p>
</li>
<li>
<p>Compute the velocity along the bank using the simulation data</p>
</li>
<li>
<p><strong>Calculate bank height</strong> (only for the first level):</p>
</li>
<li>
<p>Determine the maximum bed elevation per cell along the bank</p>
</li>
<li>
<p><strong>Get fairway data</strong>:</p>
</li>
<li>Get fairway face indices from the bank</li>
<li>Retrieve fairway data (water level, chezy, water depth) in a single call</li>
<li>Extract and assign the values to the SingleCalculation object</li>
<li>
<p>Update the maximum water depth if necessary</p>
</li>
<li>
<p><strong>Calculate equilibrium erosion</strong> (only for the last level):</p>
</li>
<li>Compute the equilibrium erosion distance and volume using the <code>ErosionCalculator</code></li>
<li>
<p>Store the results in the <code>SingleCalculation</code> object</p>
</li>
<li>
<p><strong>Calculate bank erosion dynamics</strong>:</p>
</li>
<li>Compute the bank erosion during the current discharge level using the <code>ErosionCalculator</code></li>
<li>
<p>This includes calculating erosion due to both flow and shipping</p>
</li>
<li>
<p><strong>Accumulate eroded volumes per kilometer</strong>:</p>
</li>
<li>Aggregate the eroded volumes by kilometer bins</li>
<li>Store the results in the <code>SingleCalculation</code> object</li>
<li>
<p>Add the volumes to the total eroded volumes array</p>
</li>
<li>
<p><strong>Output debug information</strong> (if debug mode is enabled):</p>
</li>
<li>
<p>Write detailed information about the calculations to files</p>
</li>
<li>
<p><strong>Create a SingleDischargeLevel object</strong>:</p>
<ul>
<li>Combine the calculation results for both banks into a single object</li>
<li>Include the maximum water depth in the fairway</li>
</ul>
</li>
<li>
<p><strong>Return results</strong>:</p>
<ul>
<li>Return the <code>SingleDischargeLevel</code> object and the eroded volumes array</li>
</ul>
</li>
</ol>
<h2 id="sequence-diagram"><a class="toclink" href="#sequence-diagram">Sequence Diagram</a><a class="headerlink" href="#sequence-diagram" title="Permanent link">#</a></h2>
<p>The following sequence diagram illustrates the interaction between different components during the execution of the <code>compute_erosion_per_level</code> method:</p>
<pre class="mermaid"><code>sequenceDiagram
    participant Erosion
    participant BankData
    participant SimulationData
    participant ErosionCalculator
    participant SingleCalculation
    participant SingleDischargeLevel

    Erosion-&gt;&gt;Erosion: compute_erosion_per_level(level_i, ...)
    loop for each bank (left and right)
        Erosion-&gt;&gt;SingleCalculation: create new calculation object
        Erosion-&gt;&gt;SimulationData: calculate_bank_velocity(bank_i, vel_dx)
        SimulationData--&gt;&gt;Erosion: bank_velocity
        Erosion-&gt;&gt;SingleCalculation: set bank_velocity

        alt is first level
            Erosion-&gt;&gt;SimulationData: calculate_bank_height(bank_i, zb_dx)
            SimulationData--&gt;&gt;Erosion: bank_height
        end

        Erosion-&gt;&gt;SimulationData: get_fairway_data(fairway_face_indices)
        SimulationData--&gt;&gt;Erosion: data (containing water_level, chezy, water_depth)
        Erosion-&gt;&gt;SingleCalculation: set water_level, chezy, water_depth from data

        alt is last level
            Erosion-&gt;&gt;ErosionCalculator: comp_erosion_eq(...)
            ErosionCalculator--&gt;&gt;Erosion: erosion_distance_eq, erosion_volume_eq
            Erosion-&gt;&gt;SingleCalculation: set erosion_distance_eq, erosion_volume_eq
        end

        Erosion-&gt;&gt;ErosionCalculator: compute_bank_erosion_dynamics(...)
        ErosionCalculator--&gt;&gt;Erosion: updated SingleCalculation

        Erosion-&gt;&gt;Erosion: get_km_eroded_volume(...)
        Erosion-&gt;&gt;SingleCalculation: set volume_per_discharge
        Erosion-&gt;&gt;Erosion: append to par_list

        alt debug mode enabled
            Erosion-&gt;&gt;Erosion: _debug_output(...)
        end
    end

    Erosion-&gt;&gt;SingleDischargeLevel: create with left=par_list[0], right=par_list[1]
    Erosion--&gt;&gt;Erosion: return level_calculation, dvol_bank</code></pre>
<h2 id="data-flow"><a class="toclink" href="#data-flow">Data Flow</a><a class="headerlink" href="#data-flow" title="Permanent link">#</a></h2>
<p>The data flow in the <code>compute_erosion_per_level</code> method can be visualized as follows:</p>
<pre class="mermaid"><code>flowchart LR
    subgraph Inputs
        A[bank_data]
        B[simulation_data]
        C[fairway_data]
        D[single_parameters]
        E[erosion_inputs]
        F[km_bin]
    end

    subgraph Processing
        G[Calculate bank velocity]
        H[Calculate bank height]
        I1[Get fairway data]
        I2[Extract water level, chezy, water depth]
        J[Calculate equilibrium erosion]
        K[Calculate bank erosion dynamics]
        L[Accumulate eroded volumes]
    end

    subgraph Outputs
        M[SingleDischargeLevel]
        N[dvol_bank]
    end

    A --&gt; G
    B --&gt; G
    B --&gt; H
    B --&gt; I1
    A --&gt; I1
    I1 --&gt; I2

    C --&gt; J
    D --&gt; J
    E --&gt; J
    A --&gt; J
    I2 --&gt; J

    G --&gt; K
    H --&gt; K
    I2 --&gt; K
    C --&gt; K
    D --&gt; K
    E --&gt; K

    K --&gt; L
    F --&gt; L
    A --&gt; L

    L --&gt; M
    L --&gt; N
    J --&gt; M</code></pre>
<h2 id="key-calculations"><a class="toclink" href="#key-calculations">Key Calculations</a><a class="headerlink" href="#key-calculations" title="Permanent link">#</a></h2>
<p>The <code>compute_erosion_per_level</code> method relies on two key calculations performed by the <code>ErosionCalculator</code>:</p>
<ol>
<li><strong>Equilibrium Erosion Calculation</strong> (for the last discharge level):</li>
<li>Calculates the equilibrium bank erosion distance and volume</li>
<li>Takes into account bank height, water level, and ship-induced wave height</li>
<li>
<p>Returns the maximum potential erosion distance and volume</p>
</li>
<li>
<p><strong>Bank Erosion Dynamics Calculation</strong> (for all discharge levels):</p>
</li>
<li>Calculates the bank erosion during a specific discharge level</li>
<li>Computes erosion due to both flow and shipping</li>
<li>Takes into account bank velocity, water level, and ship parameters</li>
<li>Returns the erosion distance and volume for the current level</li>
</ol>
<h2 id="physical-processes-and-mathematical-models"><a class="toclink" href="#physical-processes-and-mathematical-models">Physical Processes and Mathematical Models</a><a class="headerlink" href="#physical-processes-and-mathematical-models" title="Permanent link">#</a></h2>
<p>The erosion calculation process is based on physical processes and mathematical models that describe the interaction between water flow, ship waves, and bank material. This section explains the key formulas and calculations used in the <code>ErosionCalculator</code> class.</p>
<h3 id="ship-induced-wave-height-calculation"><a class="toclink" href="#ship-induced-wave-height-calculation">Ship-Induced Wave Height Calculation</a><a class="headerlink" href="#ship-induced-wave-height-calculation" title="Permanent link">#</a></h3>
<p>The height of waves generated by passing ships is a key factor in bank erosion. The wave height at the bank is calculated using the following formula:</p>
<pre class="mermaid"><code>graph TD
    A[Calculate ship coefficient a1 based on ship type] --&gt; B[Calculate Froude number]
    B --&gt; C[Limit Froude number to 0.8]
    C --&gt; D[Calculate wave attenuation factor A]
    D --&gt; E[Calculate wave height h0]</code></pre>
<ol>
<li><strong>Ship coefficient (a1)</strong> depends on ship type:</li>
<li>Multiple barge convoy: <code>a1 = 0.5</code></li>
<li>RHK ship / motor ship: <code>a1 = 0.28 * ship_draught^1.25</code></li>
<li>
<p>Towboat: <code>a1 = 1</code></p>
</li>
<li>
<p><strong>Froude number</strong> is calculated as:
   <div class="highlight"><pre><span></span><code>froude = ship_velocity / (h * g)
</code></pre></div>
   where:</p>
</li>
<li><code>ship_velocity</code> is the velocity of the ship [m/s]</li>
<li><code>h</code> is the water depth at the fairway [m]</li>
<li><code>g</code> is the gravitational acceleration [m/s]</li>
</ol>
<p>The Froude number is limited to 0.8 to prevent unrealistic wave heights.</p>
<ol>
<li><strong>Wave attenuation factor (A)</strong> accounts for the reduction in wave height with distance from the fairway:
   <div class="highlight"><pre><span></span><code>A = 0.5 * (1 + cos((bank_fairway_dist - fairway_wave_disappear_distance) / (fairway_wave_reduction_distance - fairway_wave_disappear_distance) * ))
</code></pre></div>
   with the following conditions:</li>
<li>If <code>bank_fairway_dist &lt; fairway_wave_disappear_distance</code>, then <code>A = 1</code></li>
<li>
<p>If <code>bank_fairway_dist &gt; fairway_wave_reduction_distance</code>, then <code>A = 0</code></p>
</li>
<li>
<p><strong>Wave height (h0)</strong> is calculated as:
   <div class="highlight"><pre><span></span><code>h0 = a1 * h * (bank_fairway_dist / h)^(-1/3) * froude^4 * A
</code></pre></div></p>
</li>
</ol>
<h3 id="equilibrium-erosion-calculation"><a class="toclink" href="#equilibrium-erosion-calculation">Equilibrium Erosion Calculation</a><a class="headerlink" href="#equilibrium-erosion-calculation" title="Permanent link">#</a></h3>
<p>The equilibrium erosion represents the maximum potential erosion that could occur over a very long time period. It is calculated as follows:</p>
<pre class="mermaid"><code>graph TD
    A[Calculate ship-induced wave height h0] --&gt; B[Determine upper bound of erosion zone zup]
    B --&gt; C[Determine lower bound of erosion zone zdo]
    C --&gt; D[Calculate height of erosion zone ht]
    D --&gt; E[Calculate height above erosion zone hs]
    E --&gt; F[Calculate equilibrium erosion distance]
    F --&gt; G[Calculate equilibrium erosion volume]</code></pre>
<ol>
<li>
<p><strong>Upper bound of erosion zone (zup)</strong>:
   <div class="highlight"><pre><span></span><code>zup = min(bank_height, water_level_fairway_ref + 2 * h0)
</code></pre></div></p>
</li>
<li>
<p><strong>Lower bound of erosion zone (zdo)</strong>:
   <div class="highlight"><pre><span></span><code>zdo = max(water_level_fairway_ref - 2 * h0, bank_protection_level)
</code></pre></div></p>
</li>
<li>
<p><strong>Height of erosion zone (ht)</strong>:
   <div class="highlight"><pre><span></span><code>ht = max(zup - zdo, 0)
</code></pre></div></p>
</li>
<li>
<p><strong>Height above erosion zone (hs)</strong>:
   <div class="highlight"><pre><span></span><code>hs = max(bank_height - water_level_fairway_ref + 2 * h0, 0)
</code></pre></div></p>
</li>
<li>
<p><strong>Equilibrium erosion distance (eq_erosion_distance)</strong>:
   <div class="highlight"><pre><span></span><code>eq_erosion_distance = ht / mu_slope
</code></pre></div>
   where <code>mu_slope</code> is the bank slope [-]</p>
</li>
<li>
<p><strong>Equilibrium erosion volume (eq_erosion_volume)</strong>:
   <div class="highlight"><pre><span></span><code>eq_erosion_volume = (0.5 * ht + hs) * eq_erosion_distance * segment_length
</code></pre></div></p>
</li>
</ol>
<h3 id="bank-erosion-dynamics-calculation"><a class="toclink" href="#bank-erosion-dynamics-calculation">Bank Erosion Dynamics Calculation</a><a class="headerlink" href="#bank-erosion-dynamics-calculation" title="Permanent link">#</a></h3>
<p>The bank erosion dynamics calculation determines the erosion that occurs during a specific discharge level, taking into account both flow-induced and ship-induced erosion.</p>
<h4 id="flow-induced-erosion"><a class="toclink" href="#flow-induced-erosion">Flow-Induced Erosion</a><a class="headerlink" href="#flow-induced-erosion" title="Permanent link">#</a></h4>
<p>Flow-induced erosion occurs when the flow velocity exceeds the critical velocity for the bank material:</p>
<pre class="mermaid"><code>graph TD
    A[Calculate erosion coefficient] --&gt; B[Calculate critical velocity]
    B --&gt; C[Calculate velocity ratio]
    C --&gt; D[Calculate flow-induced erosion distance]
    D --&gt; E[Calculate flow-induced erosion volume]</code></pre>
<ol>
<li>
<p><strong>Erosion coefficient (erosion_coef)</strong>:
   <div class="highlight"><pre><span></span><code>erosion_coef = 0.2 * (tauc) * 10^-6
</code></pre></div>
   where <code>tauc</code> is the critical shear stress [N/m]</p>
</li>
<li>
<p><strong>Critical velocity (critical_velocity)</strong>:
   <div class="highlight"><pre><span></span><code>critical_velocity = (tauc / (water_density * chezy / g))
</code></pre></div>
   where:</p>
</li>
<li><code>water_density</code> is the density of water [kg/m]</li>
<li><code>chezy</code> is the Chezy coefficient [m^0.5/s]</li>
<li>
<p><code>g</code> is the gravitational acceleration [m/s]</p>
</li>
<li>
<p><strong>Velocity ratio (crit_ratio)</strong>:
   <div class="highlight"><pre><span></span><code>crit_ratio = (vel / critical_velocity)
</code></pre></div>
   if <code>vel &gt; critical_velocity</code> and <code>water_level &gt; bank_protection_level</code></p>
</li>
<li>
<p><strong>Flow-induced erosion distance (erosion_distance_flow)</strong>:
   <div class="highlight"><pre><span></span><code>erosion_distance_flow = erosion_coef * (crit_ratio - 1) * time_erosion * sec_year
</code></pre></div>
   where:</p>
</li>
<li><code>time_erosion</code> is the erosion period [yr]</li>
<li>
<p><code>sec_year</code> is the number of seconds in a year (3600 * 24 * 365)</p>
</li>
<li>
<p><strong>Flow-induced erosion volume (dv_flow)</strong>:
   <div class="highlight"><pre><span></span><code>dv_flow = erosion_distance_flow * segment_length * h_line_flow
</code></pre></div>
   where <code>h_line_flow</code> is the height of the bank subject to flow erosion</p>
</li>
</ol>
<h4 id="ship-induced-erosion"><a class="toclink" href="#ship-induced-erosion">Ship-Induced Erosion</a><a class="headerlink" href="#ship-induced-erosion" title="Permanent link">#</a></h4>
<p>Ship-induced erosion occurs due to waves generated by passing ships:</p>
<pre class="mermaid"><code>graph TD
    A[Calculate ship wave period] --&gt; B[Calculate total wave exposure time]
    B --&gt; C[Calculate strength coefficient]
    C --&gt; D[Calculate ship-induced erosion distance]
    D --&gt; E[Calculate ship-induced erosion volume]</code></pre>
<ol>
<li>
<p><strong>Ship wave period (ship_wave_period)</strong>:
   <div class="highlight"><pre><span></span><code>ship_wave_period = 0.51 * ship_velocity / g
</code></pre></div></p>
</li>
<li>
<p><strong>Total wave exposure time (ts)</strong>:
   <div class="highlight"><pre><span></span><code>ts = ship_wave_period * num_ship * num_waves_per_ship
</code></pre></div>
   where:</p>
</li>
<li><code>num_ship</code> is the number of ships</li>
<li>
<p><code>num_waves_per_ship</code> is the number of waves per ship</p>
</li>
<li>
<p><strong>Strength coefficient (cE)</strong>:
   <div class="highlight"><pre><span></span><code>cE = 1.85 * 10^-4 / tauc
</code></pre></div></p>
</li>
<li>
<p><strong>Ship-induced erosion distance (erosion_distance_shipping)</strong>:
   <div class="highlight"><pre><span></span><code>erosion_distance_shipping = cE * wave_height * ts * time_erosion
</code></pre></div>
   if <code>ship_wave_min &lt; water_level_fairway_ref &lt; ship_wave_max</code></p>
</li>
<li>
<p><strong>Ship-induced erosion volume (dv_ship)</strong>:
   <div class="highlight"><pre><span></span><code>dv_ship = erosion_distance_shipping * segment_length * h_line_ship
</code></pre></div>
   where <code>h_line_ship</code> is the height of the bank subject to ship-induced erosion</p>
</li>
</ol>
<h4 id="total-erosion"><a class="toclink" href="#total-erosion">Total Erosion</a><a class="headerlink" href="#total-erosion" title="Permanent link">#</a></h4>
<p>The total erosion is the sum of flow-induced and ship-induced erosion:</p>
<ol>
<li>
<p><strong>Total erosion distance (erosion_distance)</strong>:
   <div class="highlight"><pre><span></span><code>erosion_distance = erosion_distance_shipping + erosion_distance_flow
</code></pre></div></p>
</li>
<li>
<p><strong>Total erosion volume (erosion_volume)</strong>:
   <div class="highlight"><pre><span></span><code>erosion_volume = dv_ship + dv_flow
</code></pre></div></p>
</li>
</ol>
<h2 id="usage-example"><a class="toclink" href="#usage-example">Usage Example</a><a class="headerlink" href="#usage-example" title="Permanent link">#</a></h2>
<p>The <code>compute_erosion_per_level</code> method is called within the <code>_process_discharge_levels</code> method of the <code>Erosion</code> class, which processes all discharge levels:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_process_discharge_levels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="k">for</span> <span class="n">level_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_levels</span><span class="p">):</span>
        <span class="c1"># ...</span>
        <span class="n">level_calculation</span><span class="p">,</span> <span class="n">dvol_bank</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_erosion_per_level</span><span class="p">(</span>
            <span class="n">level_i</span><span class="p">,</span>
            <span class="n">bank_data</span><span class="p">,</span>
            <span class="n">simulation_data</span><span class="p">,</span>
            <span class="n">fairway_data</span><span class="p">,</span>
            <span class="n">single_parameters</span><span class="p">,</span>
            <span class="n">erosion_inputs</span><span class="p">,</span>
            <span class="n">km_bin</span><span class="p">,</span>
            <span class="n">num_km</span><span class="p">,</span>
            <span class="n">bank_height</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">discharge_levels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">level_calculation</span><span class="p">)</span>
        <span class="c1"># ...</span>
</code></pre></div>
<p>The results are then used to calculate the total erosion volume and other parameters for the entire river.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="bank_erosion.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Bank Erosion Module">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Bank Erosion Module
              </div>
            </div>
          </a>
        
        
          
          <a href="erosion_calculator.html" class="md-footer__link md-footer__link--next" aria-label="Next: Bank Erosion Calculator">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Bank Erosion Calculator
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.highlight", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10/dist/mermaid.min.js"></script>
      
    
  </body>
</html>